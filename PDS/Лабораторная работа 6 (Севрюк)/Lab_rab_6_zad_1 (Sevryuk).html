<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<script type="text/javascript" charset="UTF-8"></script>
	<script>
		/*Вариант 2. 
		Задание 1. В тексте найти 3 наиболее часто встречающихся символа, 
		вывести текст на печать, выделив эти три символа красным, синим 
		и зеленым цветами соответственно. Пробел не учитывать.*/

		let str = `Алиса сидела со старшей сестрой на берегу и маялась: делать ей было совершенно нечего, а сидеть без дела, сами знаете, дело нелегкое; раз-другой она, правда, сунула нос в книгу, которую сестра читала, но там не оказалось ни картинок, ни стишков. "Кому нужны книжки без картинок или хоть стишков, не понимаю!" - думала Алиса. 
      	С горя она начала подумывать (правда, сейчас это тоже было дело не из легких - от жары ее совсем разморило), что, конечно, неплохо бы сплести венок из маргариток, но плохо то, что тогда нужно подниматься и идти собирать эти маргаритки, как вдруг... Как вдруг совсем рядом появился белый кролик с розовыми глазками! 
      	Тут, разумеется, еще не было ничего такого необыкновенного; Алиса-то не так уж удивилась, даже когда услыхала, что Кролик сказал (а сказал он: "Ай-ай-ай! Я опаздываю!"). Кстати, потом, вспоминая обо всем этом, она решила, что все-таки немножко удивиться стоило, но сейчас ей казалось, что все идет как надо. 
      	Но когда Кролик достал из жилетного    кармана (да-да, именно!) ЧАСЫ (настоящие!) и, едва взглянув на них, опрометью кинулся бежать, тут Алиса так и подскочила! 
      	Еще бы! Ведь это был первый Кролик в жилетке и при часах, какого она встретила за всю свою жизнь! 
      	Сгорая от любопытства, она со всех ног помчалась вдогонку за Кроликом и, честное слово, чуть-чуть его не догнала! 
      	Во всяком случае, она поспела как раз вовремя, чтобы заметить, как Белый Кролик скрылся в большой норе под колючей изгородью.`;

		//Сохраняем копию исходной строки
		var str1 = str.slice();

		//Преобразуем строку с целью убрать все мешающие символы и знаки препинания
		const sign = /[,."')(;!:-]/g;
		str = str.replace(sign, " ");
		str = str.replace(/\s+/g, '');
		str = str.toLowerCase();

		//Преобразуем все символы текста в массив и сортируем его
		const arr = str.split("");
		arr.sort();

		//Считаем количество повторений каждой буквы в массиве		
		var result = {};
		for (var i = 0; i < arr.length; ++i) {
			var a = arr[i];
			if (result[a] != undefined)
				++result[a];
			else
				result[a] = 1;
		}
		var massiv = [];
		for (var key in result) {
			massiv.push(result[key]);
		}

		//Сохраняем копию исходного массива с количеством букв
		var firstMassiv = massiv.slice();

		//Сортируем массив с количеством букв в порядке возрастания
		for (var i = 0; i < massiv.length - 1; i++) {
			for (var j = 0; j < massiv.length - i - 1; j++) {
				if (massiv[j] > massiv[j + 1]) {
					temp = massiv[j];
					massiv[j] = massiv[j + 1];
					massiv[j + 1] = temp;
				}
			}
		}

		//Находим три наибольших числа в этом массиве (3 последних числа)
		var max1 = massiv[massiv.length - 1];
		var max2 = massiv[massiv.length - 2];
		var max3 = massiv[massiv.length - 3];

		//Ищем индексы этих чисел в сохраненной копии массива
		var idx_max1 = firstMassiv.indexOf(max1);
		var idx_max2 = firstMassiv.indexOf(max2);
		var idx_max3 = firstMassiv.indexOf(max3);

		//Удаляем все повторяющиеся элементы в массиве с буквами (в итоге остается по одной букве)
		function povtor(a) {
			for (var q = 1, i = 1; q < a.length; q++) {
				if (a[q] !== a[q - 1]) {
					a[i++] = a[q];
				}
			}
			a.length = i;
			return a;
		}
		var d = povtor(arr);

		//По имебщимся индексам ищем в массиве буквы, котрые употребляются наиболее часто
		var bukva1 = d[idx_max1];
		var bukva2 = d[idx_max2];
		var bukva3 = d[idx_max3];

		//Красим буквы в нужные цвета
		var newText = "";
		for (var i = 0; i < str1.length; i++) {
			if (str1[i] == bukva1) {
				newText += str1.charAt(i).fontcolor("red");
			}
			else if (str1[i] == bukva2) {
				newText += str1.charAt(i).fontcolor("blue");
			}
			else if (str1[i] == bukva3) {
				newText += str1.charAt(i).fontcolor("green");
			}
			else {
				newText += str1[i];
			}
		}
		document.write(newText);

	</script>
</head>

<body>
</body>

</html>